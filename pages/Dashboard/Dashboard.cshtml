@model Donor
@{
    ViewData["Title"] = "Dashboard";
}

<!DOCTYPE html>
<html lang="en">
<head>
     <!-- üîç Metadata -->
    <meta name="description" content="BloodBridge connects blood donors and recipients efficiently across Ghana." />
    <meta name="author" content="Richard Boakye Yiadom" />
    <meta name="theme-color" content="#b30000" />

    <!-- üß† Favicon -->
    <link rel="icon" href="~/images/favicon.ico" type="image/x-icon" />

    <!-- üé® Stylesheets -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/layout.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/dashboard.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Chartforum.css" asp-append-version="true" />

    <!-- ‚ö° External Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>

    <!-- üí° Custom Scripts -->
    <script src="~/js/site.js" asp-append-version="true"></script>
</head>


<body class="bg-light">
  <!-- üî• Dashboard Main Layout -->
  <div class="container-fluid">
    <div class="row">
      <!-- üöÄ Main Dashboard Content -->
      <main class="col-md-9 col-lg-10 px-md-4 main-content">
        <div class="d-flex justify-content-between align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2 text-danger">Dashboard Overview</h1>
        </div>

        <!-- ‚úÖ Success & Error Messages -->
        @if (TempData["SuccessMessage"] != null)
        {
          <div class="alert alert-success fade-in" role="alert">
            @TempData["SuccessMessage"]
          </div>
        }
        @if (TempData["ErrorMessage"] != null)
        {
          <div class="alert alert-danger fade-in" role="alert">
            @TempData["ErrorMessage"]
          </div>
        }





        <div class="row">
        <!-- ü©∏ Personal Details Card -->
<div class="col-lg-4">
  <div class="card bg-white shadow mb-4 border-danger">
    <div class="card-header bg-danger text-white">
      Your Profile
    </div>
    <div class="card-body">
      @if (Model != null)
      {
        <p><strong>Username:</strong> @Model.FullName</p>
        <p><strong>Email:</strong> @Model.Email</p>
        <p><strong>Phone:</strong> @(Model.PhoneNumber ?? "Not Provided")</p>
        <p><strong>Blood Group:</strong> @(Model.BloodGroup ?? "Unknown")</p>
        
        <!-- Toggle link for additional details -->
        <a id="toggleDetailsBtn"
           class="btn btn-link p-0"
           data-bs-toggle="collapse"
           data-bs-target="#moreDetails"
           role="button"
           aria-expanded="false"
           aria-controls="moreDetails">
          See More
        </a>
        
        <!-- Collapsible section showing additional user data -->
        <div class="collapse mt-3" id="moreDetails">
          <div class="card card-body">
            <p><strong>Date of Birth:</strong> @Model.DateOfBirth.ToString("MMM dd, yyyy")</p>
            <p><strong>National ID Number:</strong> @(string.IsNullOrWhiteSpace(Model.NationalIDNumber) ? "Not Provided" : Model.NationalIDNumber)</p>
            <p><strong>Location:</strong> @(string.IsNullOrWhiteSpace(Model.Location) ? "Not Provided" : Model.Location)</p>
            <p><strong>Emergency Contact Name:</strong> @(string.IsNullOrWhiteSpace(Model.EmergencyContactName) ? "Not Provided" : Model.EmergencyContactName)</p>
            <p><strong>Emergency Contact Phone:</strong> @(string.IsNullOrWhiteSpace(Model.EmergencyContactPhone) ? "Not Provided" : Model.EmergencyContactPhone)</p>
            <p><strong>Donation Frequency:</strong> @Model.DonationFrequency</p>
            <p><strong>Last Donation:</strong> @(Model.LastDonationDate?.ToString("MMM dd, yyyy") ?? "No donations yet")</p>
            <p><strong>Next Donation:</strong> @(Model.NextDonationDate?.ToString("MMM dd, yyyy") ?? "Not Scheduled")</p>
            <p><strong>Profile Completion:</strong> @Model.ProfileCompletionPercentage% Complete</p>
          </div>
        </div>
      }
      else
      {
        <p class="text-danger">No user data available.</p>
      }
    </div>
  </div>
</div>



         <!-- üöÄ Health & Donation Insights -->
<div class="col-lg-8">
  <div class="card bg-white shadow-sm border-warning">
    <div class="card-header bg-warning text-dark fw-bold">
      Health & Donation Tips
    </div>
    <div class="card-body">
      <ul class="list-unstyled mb-3">
        <li>üíß <strong>Stay Hydrated:</strong> Drink plenty of fluids before donating to maintain blood volume.</li>
        <li>ü•© <strong>Iron-Rich Foods:</strong> Include foods like spinach, beans, and red meat for faster recovery.</li>
      </ul>
      <p class="mb-3">
        ü©∏ <strong>Next Donation Date:</strong> 
@if (Model?.NextDonationDate != null && Model.NextDonationDate > DateTime.MinValue)
{
    <p>ü©∏ <strong>Next Donation Date:</strong> @Model.NextDonationDate.Value.ToString("MMM dd, yyyy")</p>
}      </p>

      <p>
        üîç <a asp-controller="Home" asp-action="DonationCenters" class="text-decoration-none fw-semibold">
          Find Blood Donation Centers Near You
        </a>
      </p>
    </div>
  </div>
</div>

       <!-- ‚ö° Recent Activity & Notifications -->
<div class="row">
  <div class="col-lg-6">
    <div class="card bg-white shadow-sm border-info">
      <div class="card-header bg-info text-dark fw-bold">
        Recent Activity
      </div>
      <div class="card-body">
        <ul class="list-unstyled mb-3">
          <li>ü©∏ <strong>Last Donation:</strong> 
@if (Model?.LastDonationDate != null && Model.LastDonationDate > DateTime.MinValue)
{
    <p>ü©∏ <strong>last Donation Date:</strong> @Model.LastDonationDate.Value.ToString("MMM dd, yyyy")</p>
}          </li>

          <li>üìÖ <strong>Next Appointment:</strong> 
@if (Model?.NextAppointment != null && Model.NextAppointment > DateTime.MinValue)
{
    <p>ü©∏ <strong>Next Appointment Date:</strong> @Model.NextAppointment.Value.ToString("MMM dd, yyyy")</p>
}          </li>

          <li>üîî <a asp-controller="Dashboard" asp-action="Notification" class="text-decoration-none fw-semibold">
            View Notifications
          </a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

         <!-- ‚ö° Quick Actions -->
<div class="col-lg-6">
  <div class="card bg-white shadow-sm border-primary">
    <div class="card-header bg-primary text-white fw-bold">
      Quick Actions
    </div>
    <div class="card-body text-center">
      <button class="btn btn-danger w-100 mb-2" asp-controller="Dashboard" asp-action="Appointment">
        üìÖ Schedule Next Donation
      </button>
      <button class="btn btn-dark w-100" asp-controller="Dashboard" asp-action="Donation">
        ü©∏ Donate Now
      </button>
    </div>
  </div>
</div>

        <!-- üìä Blood Supply Status -->
       <!-- üìä Blood Supply Status -->
<div class="row">
  <div class="col-lg-12">
    <div class="card bg-white shadow-sm border-danger">
      <div class="card-header bg-danger text-white fw-bold">
        Blood Supply Status
      </div>
      <div class="card-body">
        <p class="mb-3">
          üö® <strong class="text-danger">Urgent Need:</strong> O-negative & B-positive donors are critically required!
        </p>
        <p>
          ‚ö° <a asp-controller="Donations" asp-action="UrgentCases" class="text-decoration-none fw-semibold text-danger">
            See urgent cases & help save lives
          </a>
        </p>
      </div>
    </div>
  </div>
</div>
      </main>
    </div>
  </div>
</body>
</html>